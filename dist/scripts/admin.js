!function(){"use strict";var e={n:function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,{a:o}),o},d:function(t,o){for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.React,o=window.wp.element,n=window.wp.compose,r=window.wp.components,a=window.wp.data,s=window.wp.hooks,i=window.wp.apiFetch,c=e.n(i);class d extends o.Component{constructor(){super(...arguments),this.state={selected:0,options:[],message:""}}componentDidMount(){const{hazardType:e}=this.props;c()({path:"/wp/v2/hazard_type?per_page=-1"}).then((t=>{const o=t.map((e=>({label:e.name,value:e.id})));if(this.setState({options:o,message:""}),e&&e[0])this.setState({selected:e[0]});else{const e=o[0].value;this.onUpdateHazardType({option:e})}}),(e=>{this.setState({message:e.message})}))}onUpdateHazardType(e){const{onChangeHazardType:t}=this.props;this.setState({selected:parseInt(e.option,10)}),t(e.option)}render(){const{selected:e,options:o,message:n}=this.state,{taxonomy:a}=this.props;let s;return o&&o.length>1&&(s=(0,t.createElement)(r.SelectControl,{value:e,options:o,onChange:e=>{this.onUpdateHazardType({option:e})}})),(0,t.createElement)("div",null,a&&""!==a.description&&(0,t.createElement)("p",null,a.description),s,n&&(0,t.createElement)("p",{className:"error"},n))}}const l=(0,n.compose)([(0,a.withSelect)((e=>{const t={hazardType:e("core/editor").getEditedPostAttribute("hazard_type")},o=e("core").getEntityRecord("taxonomy","hazard_type",t.hazardType[0]);return o&&(document.body.className=document.body.className.replace(/(^|\s)hazard_type-\S+/g,""),document.body.classList.add("hazard_type-"+o.slug)),t})),(0,a.withDispatch)((e=>({onChangeHazardType:t=>{e("core/editor").editPost({hazard_type:[t]})}})))])(d);(0,s.addFilter)("editor.PostTaxonomyType","emergency-info",(e=>{const o=o=>{const{slug:n}=o;return"hazard_type"===n?(0,t.createElement)(l,{...o}):(0,t.createElement)(e,{...o})};return o.displayName="hazardTypeFilter",o}));var p=window.wp.blockEditor,m=window.wp.i18n;(0,s.addFilter)("blocks.registerBlockType","emergency-info",(e=>(e.attributes.hideBlock={type:"boolean",default:!1},e)));const h=(0,n.createHigherOrderComponent)((e=>{const n=n=>{const{hideBlock:a}=n.attributes,{setAttributes:s}=n;return(0,t.createElement)(o.Fragment,null,(0,t.createElement)(e,{...n}),(0,t.createElement)(p.InspectorControls,null,(0,t.createElement)(r.PanelBody,{title:(0,m.__)("Visibility")},(0,t.createElement)(r.ToggleControl,{label:(0,m.__)("Hide block"),checked:a,onChange:e=>s({hideBlock:e})}))))};return n.displayName="withInspectorControl",n}),"withInspectorControl");(0,s.addFilter)("editor.BlockEdit","emergency-info",h);const u=(0,n.createHigherOrderComponent)((e=>{const o=o=>{const{attributes:n}=o,{hideBlock:r}=n,a=r?"hidden-block":"";return(0,t.createElement)(e,{...o,className:a})};return o.displayName="withCustomAttributeClass",o}),"withCustomAttributeClass");(0,s.addFilter)("editor.BlockListBlock","emergency-info",u)}();