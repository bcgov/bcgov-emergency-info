(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,o=window.wp.compose,n=window.wp.components,r=window.wp.data,a=window.wp.hooks,s=window.wp.apiFetch;var i=e.n(s);class c extends t.Component{constructor(){super(...arguments),this.state={selected:0,options:[],message:""}}componentDidMount(){const{hazardType:e}=this.props;e&&e[0]&&this.setState({selected:e[0]}),i()({path:"/wp/v2/hazard_type"}).then((e=>{const t=e.map((e=>({label:e.name,value:e.id})));this.setState({options:t,message:""})}),(e=>{this.setState({message:e.message})}))}onUpdateHazardType(e){const{onChangeHazardType:t}=this.props;this.setState({selected:parseInt(e.option,10)}),t(e.option)}render(){const{selected:e,options:o,message:r}=this.state,{taxonomy:a}=this.props;let s;return o&&o.length>1&&(s=(0,t.createElement)(n.SelectControl,{value:e,options:o,onChange:e=>{this.onUpdateHazardType({option:e})}})),(0,t.createElement)("div",null,a&&""!==a.description&&(0,t.createElement)("p",null,a.description),s,r&&(0,t.createElement)("p",{className:"error"},r))}}const l=(0,o.compose)([(0,r.withSelect)((e=>({hazardType:e("core/editor").getEditedPostAttribute("hazard_type")}))),(0,r.withDispatch)((e=>({onChangeHazardType:t=>{e("core/editor").editPost({hazard_type:[t]})}})))])(c);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},d.apply(this,arguments)}(0,a.addFilter)("editor.PostTaxonomyType","emergency-info",(e=>o=>{const{slug:n}=o;return"hazard_type"===n?(0,t.createElement)(l,o):(0,t.createElement)(e,o)}));const p=window.wp.blockEditor;(0,a.addFilter)("blocks.registerBlockType","emergency-info",(function(e){return e.attributes.hideBlock={type:"boolean",default:!1},e}));const h=(0,o.createHigherOrderComponent)((e=>o=>{const{hideBlock:r}=o.attributes,{setAttributes:a}=o;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(e,o),(0,t.createElement)(p.InspectorControls,null,(0,t.createElement)(n.PanelBody,{title:"Visibility"},(0,t.createElement)(n.ToggleControl,{label:"Hide block",checked:r,onChange:e=>a({hideBlock:e})}))))}),"withInspectorControl");(0,a.addFilter)("editor.BlockEdit","emergency-info",h);const m=(0,o.createHigherOrderComponent)((e=>o=>{const{attributes:n}=o,{hideBlock:r}=n,a=r?"hidden-block":"";return(0,t.createElement)(e,d({},o,{className:a}))}),"withCustomAttributeClass");(0,a.addFilter)("editor.BlockListBlock","emergency-info",m)})();