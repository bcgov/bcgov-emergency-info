(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var a in o)e.o(o,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:o[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,o=window.wp.compose,a=window.wp.components,n=window.wp.data,s=window.wp.hooks,r=window.wp.apiFetch;var p=e.n(r);class i extends t.Component{constructor(){super(...arguments),this.state={selected:0,options:[],message:""}}componentDidMount(){const{hazardType:e}=this.props;e&&e[0]&&this.setState({selected:e[0]}),p()({path:"/wp/v2/hazard_type"}).then((e=>{const t=e.map((e=>({label:e.name,value:e.id})));this.setState({options:t,message:""})}),(e=>{this.setState({message:e.message})}))}onUpdateHazardType(e){const{onChangeHazardType:t}=this.props;this.setState({selected:parseInt(e.option,10)}),t(e.option)}render(){const{selected:e,options:o,message:n}=this.state,{taxonomy:s}=this.props;let r;return o&&o.length>1&&(r=(0,t.createElement)(a.SelectControl,{value:e,options:o,onChange:e=>{this.onUpdateHazardType({option:e})}})),(0,t.createElement)("div",null,s&&""!==s.description&&(0,t.createElement)("p",null,s.description),r,n&&(0,t.createElement)("p",{className:"error"},n))}}const d=(0,o.compose)([(0,n.withSelect)((e=>({hazardType:e("core/editor").getEditedPostAttribute("hazard_type")}))),(0,n.withDispatch)((e=>({onChangeHazardType:t=>{e("core/editor").editPost({hazard_type:[t]})}})))])(i);(0,s.addFilter)("editor.PostTaxonomyType","emergency-info",(e=>o=>{const{slug:a}=o;return"hazard_type"===a?(0,t.createElement)(d,o):(0,t.createElement)(e,o)}))})();